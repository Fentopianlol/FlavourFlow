@page "/cuisine/{CuisineName}"
@inject NavigationManager Navigation

@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Components

<PageTitle>@CuisineName Cuisine - FlavorFlow</PageTitle>

<div class="cuisine-page-header" style="background: @GetGradient(CuisineName)">
    <div class="bg-overlay"></div>

    <a class="back-button" href="/" style="text-decoration: none; display: inline-flex; align-items: center;">
        ← Back to Home
    </a>

    <div class="cuisine-header-content">
        <div class="cuisine-page-icon">@GetIcon(CuisineName)</div>
        <h1 class="cuisine-title">@CuisineName Cuisine</h1>
        <p class="cuisine-subtitle">Discover our curated list of @CuisineName recipes.</p>
    </div>
</div>

<div class="content">
    <div class="filter-tabs">
        <button class="filter-tab @(activeFilter == "All" ? "active" : "")" @onclick="@(() => SetFilter("All"))">All Recipes</button>
        <button class="filter-tab @(activeFilter == "Breakfast" ? "active" : "")" @onclick="@(() => SetFilter("Breakfast"))">Breakfast</button>
        <button class="filter-tab @(activeFilter == "Lunch" ? "active" : "")" @onclick="@(() => SetFilter("Lunch"))">Lunch</button>
        <button class="filter-tab @(activeFilter == "Dinner" ? "active" : "")" @onclick="@(() => SetFilter("Dinner"))">Dinner</button>
    </div>

    <div class="recipe-grid">
        @if (FilteredRecipes.Any())
        {
            @foreach (var recipe in FilteredRecipes)
            {
                <div class="recipe-card">
                    <div class="recipe-image">
                        <span>@recipe.Icon</span>
                        <div class="recipe-time">@recipe.Time</div>
                    </div>
                    <div class="recipe-info">
                        <div class="recipe-category">
                            <span>@CuisineName</span>
                            <div class="recipe-rating">
                                <span>⭐</span>
                                <span>@recipe.Rating</span>
                            </div>
                        </div>
                        <div class="recipe-title">@recipe.Title</div>
                        <div class="recipe-tags">
                            <span class="recipe-tag">@recipe.Tag</span>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="no-recipes">
                <p>No recipes found for this category yet.</p>
            </div>
        }
    </div>
</div>

@code {
    [Parameter]
    public string CuisineName { get; set; } = "";

    private string activeFilter = "All";

    // REMOVED: private void GoBack() as it is no longer needed with the anchor tag.

    // Filter Logic
    private void SetFilter(string filter)
    {
        activeFilter = filter;
    }

    private IEnumerable<Recipe> FilteredRecipes
    {
        get
        {
            var recipes = GetRecipes(CuisineName);
            if (activeFilter == "All") return recipes;
            return recipes;
        }
    }

    // --- Helpers for Styling ---
    private string GetGradient(string cuisine) => cuisine.ToLower() switch
    {
        "italian" => "linear-gradient(135deg, #a34e4f 0%, #c49a9a 100%)",
        "asian" => "linear-gradient(135deg, #9b5d5d 0%, #b87f7f 100%)",
        "mexican" => "linear-gradient(135deg, #c89850 0%, #d4a76f 100%)",
        "american" => "linear-gradient(135deg, #5b6fb5 0%, #7688d4 100%)",
        _ => "linear-gradient(135deg, #333 0%, #555 100%)"
    };

    private string GetIcon(string cuisine) => cuisine.ToLower() switch
    {
        "italian" => "🍝",
        "asian" => "🥢",
        "mexican" => "🌮",
        "american" => "🍔",
        _ => "🍳"
    };

    // --- Mock Data ---
    private List<Recipe> GetRecipes(string cuisine)
    {
        return cuisine.ToLower() switch
        {
            "italian" => new List<Recipe>
            {
                new Recipe { Title = "Spaghetti Carbonara", Time = "20 min", Rating = "4.9", Tag = "Classic", Icon = "🍝" },
                new Recipe { Title = "Margherita Pizza", Time = "45 min", Rating = "4.7", Tag = "Vegetarian", Icon = "🍕" },
                new Recipe { Title = "Mushroom Risotto", Time = "40 min", Rating = "4.6", Tag = "Dinner", Icon = "🍄" },
                new Recipe { Title = "Tiramisu", Time = "30 min", Rating = "5.0", Tag = "Dessert", Icon = "🍰" }
            },
            "asian" => new List<Recipe>
            {
                new Recipe { Title = "Garlic Noodles", Time = "15 min", Rating = "4.8", Tag = "Vegetarian", Icon = "🍜" },
                new Recipe { Title = "Pad Thai", Time = "30 min", Rating = "4.7", Tag = "Thai", Icon = "🍤" },
                new Recipe { Title = "Sushi Roll", Time = "50 min", Rating = "4.9", Tag = "Japanese", Icon = "🍣" }
            },
            "mexican" => new List<Recipe>
            {
                new Recipe { Title = "Street Tacos", Time = "15 min", Rating = "4.8", Tag = "Spicy", Icon = "🌮" },
                new Recipe { Title = "Guacamole", Time = "10 min", Rating = "4.9", Tag = "Dip", Icon = "🥑" },
                new Recipe { Title = "Enchiladas", Time = "45 min", Rating = "4.6", Tag = "Dinner", Icon = "🌯" }
            },
            "american" => new List<Recipe>
            {
                new Recipe { Title = "Cheeseburger", Time = "20 min", Rating = "4.7", Tag = "Classic", Icon = "🍔" },
                new Recipe { Title = "Mac & Cheese", Time = "35 min", Rating = "4.6", Tag = "Comfort", Icon = "🧀" },
                new Recipe { Title = "BBQ Ribs", Time = "3 hr", Rating = "4.9", Tag = "BBQ", Icon = "🍖" }
            },
            _ => new List<Recipe>()
        };
    }

    public class Recipe
    {
        public string Title { get; set; } = "";
        public string Time { get; set; } = "";
        public string Rating { get; set; } = "";
        public string Tag { get; set; } = "";
        public string Icon { get; set; } = "";
    }
}