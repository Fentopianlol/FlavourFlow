@page "/cuisine/{CuisineName}"
@inject FlavourFlow.Services.RecipeService RecipeService
@using FlavourFlow.Domains

<PageTitle>@CuisineName Cuisine - FlavorFlow</PageTitle>

<div class="cuisine-page-header" style="background: @GetGradient(CuisineName); padding: 40px; color: white; text-align: center;">
    <h1 class="cuisine-title">@CuisineName Cuisine</h1>
    <p class="cuisine-subtitle">Discover our curated list of @CuisineName recipes.</p>
</div>

<div class="content" style="padding: 20px;">
    <div class="recipe-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
        @if (recipes == null)
        {
            <p>Loading recipes...</p>
        }
        else if (!recipes.Any())
        {
            <div class="no-recipes">
                <p>No recipes found for this category yet.</p>
            </div>
        }
        else
        {
            @foreach (var r in recipes)
            {
                <a href="/recipe/@r.RecipeId" style="text-decoration: none; color: inherit;">
                    <div class="recipe-card" style="border: 1px solid #eee; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
                        <div class="recipe-image" style="height: 180px; background-image: url('@r.ImageURL'); background-size: cover; background-position: center;"></div>
                        <div class="recipe-info" style="padding: 15px;">
                            <h3 style="margin: 0 0 10px 0;">@r.Title</h3>
                            <span style="background: #eee; padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">@r.Difficulty</span>
                            <span style="float: right;">⏱ @r.CookTime min</span>
                        </div>
                    </div>
                </a>
            }
        }
    </div>
</div>

@code {
    [Parameter]
    public string CuisineName { get; set; } = "";

    private List<Recipe>? recipes;

    protected override async Task OnParametersSetAsync()
    {
        recipes = await RecipeService.GetRecipesByCategoryAsync(CuisineName);
    }

    private string GetGradient(string cuisine) => cuisine.ToLower() switch
    {
        "italian" => "linear-gradient(135deg, #a34e4f 0%, #c49a9a 100%)",
        "asian" => "linear-gradient(135deg, #9b5d5d 0%, #b87f7f 100%)",
        "mexican" => "linear-gradient(135deg, #c89850 0%, #d4a76f 100%)",
        "american" => "linear-gradient(135deg, #5b6fb5 0%, #7688d4 100%)",
        _ => "linear-gradient(135deg, #333 0%, #555 100%)"
    };
}